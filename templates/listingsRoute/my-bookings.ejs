<% layout('/layouts/boilerplate') %>
<div class="container mt-5">
  <h2 class="mb-4">ðŸ“– My Bookings</h2>

  <% if (bookings.length === 0) { %>
    <div class="alert alert-info text-center">No bookings yet.</div>
  <% } else { %>
    <!-- Desktop/Laptop View -->
    <div class="d-none d-md-block">
      <table class="table table-bordered table-hover shadow-sm align-middle">
        <thead class="table-dark">
          <tr class="text-center">
            <th>Venue</th>
            <th>Location</th>
            <th>Dates</th>
            <th>Days</th>
            <th>Amount</th>
            <th>Status</th>
            <th>Payment ID</th>
          </tr>
        </thead>
        <tbody>
          <% bookings.forEach(b => { %>
            <tr>
              <td><%= b.venue ? b.venue.title : "Deleted Venue" %></td>
              <td><%= b.venue ? b.venue.location : "N/A" %></td>
              <td><%= new Date(b.startDate).toDateString() %> â†’ <%= new Date(b.endDate).toDateString() %></td>
              <td class="text-center"><%= b.days %></td>
              <td>â‚¹<%= b.amount %></td>
              <td class="text-center">
                <span class="badge <%= b.status === 'Paid' ? 'bg-success' : 'bg-danger' %>">
                  <%= b.status %>
                </span>
              </td>
              <td class="small text-muted"><%= b.paymentId %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    
    <!-- Mobile View (Cards instead of Table) -->
    <div class="d-md-none">
      <% bookings.forEach(b => { %>
        <div class="card shadow-sm mb-3">
          <div class="card-body">
            <h5 class="card-title fw-bold">
              <%= b.venue ? b.venue.title : "Deleted Venue" %>
            </h5>
            <p class="mb-1"><i class="fa-solid fa-location-dot" style="color: #2178ca;"></i>
               <%= b.venue ? b.venue.location : "N/A" %>
            </p>
            <p class="mb-1"><i class="fa-solid fa-calendar-days fa-fade" style="color: #a50d0f;"></i> <%= new Date(b.startDate).toDateString() %> â†’ <%= new Date(b.endDate).toDateString() %></p>
            <p class="mb-1">ðŸ”¢ Days: <b><%= b.days %></b></p>
            <p class="mb-1">ðŸ’¸ Amount: <b>â‚¹<%= b.amount %></b></p>
            <p class="mb-1">ðŸ”‘ Payment ID: <span class="small text-muted"><%= b.paymentId %></span></p>
            <div class="d-flex justify-content-center mt-2">
            <span class="badge <%= b.status === 'Paid' ? 'bg-success' : 'bg-danger' %> mt-2 fs-6">
              <%= b.status %>
            </span>
            </div>
          </div>
        </div>
      <% }) %>
    </div>

  <% } %>
</div>
